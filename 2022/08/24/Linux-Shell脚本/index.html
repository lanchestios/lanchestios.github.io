<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="简单介绍了 Linux 中 Shell 的语法。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux Shell脚本">
<meta property="og:url" content="http://example.com/2022/08/24/Linux-Shell%E8%84%9A%E6%9C%AC/index.html">
<meta property="og:site_name" content="Lanchester Blog">
<meta property="og:description" content="简单介绍了 Linux 中 Shell 的语法。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/images/Linux/test评估文件状态.png">
<meta property="og:image" content="http://example.com/images/Linux/test评估字符串状态.png">
<meta property="og:image" content="http://example.com/images/Linux/test评估整数状态.png">
<meta property="og:image" content="http://example.com/images/Linux/bash支持的算术操作符.png">
<meta property="og:image" content="http://example.com/images/Linux/bash支持的赋值操作符.png">
<meta property="og:image" content="http://example.com/images/Linux/bash支持的位操作符.png">
<meta property="og:image" content="http://example.com/images/Linux/bash支持的比较操作符.png">
<meta property="og:image" content="http://example.com/images/Linux/test支持组合表达式的评估.png">
<meta property="og:image" content="http://example.com/images/Linux/case支持的匹配模式.png">
<meta property="article:published_time" content="2022-08-24T09:30:10.000Z">
<meta property="article:modified_time" content="2022-12-30T06:57:56.572Z">
<meta property="article:author" content="Wang Zihao">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Shell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/Linux/test评估文件状态.png">

<link rel="canonical" href="http://example.com/2022/08/24/Linux-Shell%E8%84%9A%E6%9C%AC/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Linux Shell脚本 | Lanchester Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Lanchester Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Leave a leaf</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/24/Linux-Shell%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Wang Zihao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lanchester Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux Shell脚本
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-08-24 17:30:10" itemprop="dateCreated datePublished" datetime="2022-08-24T17:30:10+08:00">2022-08-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-12-30 14:57:56" itemprop="dateModified" datetime="2022-12-30T14:57:56+08:00">2022-12-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>简单介绍了 Linux 中 Shell 的语法。</p>
<span id="more"></span>
<h1 id="Shell-基础语法"><a href="#Shell-基础语法" class="headerlink" title="Shell 基础语法"></a>Shell 基础语法</h1><h2 id="Shell-变量"><a href="#Shell-变量" class="headerlink" title="Shell 变量"></a>Shell 变量</h2><h3 id="一般变量"><a href="#一般变量" class="headerlink" title="一般变量"></a>一般变量</h3><p>Shell 脚本定义变量是 <code>key=value</code> 的形式（注意，变量名和等号之间不能有空格），而使用时需要在变量名前添加 <code>$</code> 符号（例，<code>$MY_NAME</code>）或是用 <code>$&#123;&#125;</code> 将变量名包裹起来（例，<code>$&#123;MY_NAME&#125;</code>）。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">URL</span><span class="token operator">=</span><span class="token string">"https://www.google.com"</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$URL</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$&#123;URL&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>为变量设置默认值</strong></p>
<p><code>:-</code> 的含义是：如果 parameter 未设置（也就是不存在）或为空，则使用 word 作为扩展结果。如果 parameter 不为空，则使用 parameter 的值作为扩展结果。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token punctuation">&#123;</span>parameter:-word<span class="token punctuation">&#125;</span>
$ <span class="token builtin class-name">echo</span> <span class="token punctuation">&#123;</span>foo:-<span class="token string">"default value"</span><span class="token punctuation">&#125;</span> <span class="token comment"># Console: default value</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$foo</span>                   <span class="token comment"># Console: </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><code>:=</code> 的含义是：如果 parameter 未设置或为空，则使用 word 作为扩展结果，除此之外，还将 word 赋给 parameter。如果 parameter 不为空，则使用 parameter 的值作为扩展结果。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token punctuation">&#123;</span>parameter:<span class="token operator">=</span>word<span class="token punctuation">&#125;</span>
$ <span class="token punctuation">&#123;</span>foo:<span class="token operator">=</span><span class="token string">"default value"</span><span class="token punctuation">&#125;</span> <span class="token comment"># Console: default value</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$foo</span>              <span class="token comment"># Console: default value</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><code>:?</code> 的含义是：如果 parameter 未设置或为空，该扩展会使脚本退出并返回错误信息，word 会被发送至标准错误。如果 parameter 不为空，则使用 parameter 的值作为扩展结果</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;foo<span class="token operator">:?</span>"parameter is empty"&#125;</span>
$ bash: foo: parameter is empty<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>:+</code> 的含义是：如果 parameter 未设置或为空，则扩展结果为空。如果 parameter 不为空，则使用 word 作为扩展结果；不过，parameter 的值保持不变。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">foo</span><span class="token operator">=</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;foo<span class="token operator">:+</span>"substitute value if set"&#125;</span>
$ <span class="token assign-left variable">foo</span><span class="token operator">=</span>bar
$ <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;foo<span class="token operator">:+</span>"substitute value if set"&#125;</span>
$ substitute value <span class="token keyword">if</span> <span class="token builtin class-name">set</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="只读变量"><a href="#只读变量" class="headerlink" title="只读变量"></a>只读变量</h3><p>使用 <code>readonly</code> 命令或是以<code>declare -r KEY=VALUE</code>可以将变量定义为只读变量，只读变量的值不能被改变。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">URL</span><span class="token operator">=</span><span class="token string">"https://www.google.com"</span>
<span class="token builtin class-name">readonly</span> URL
<span class="token assign-left variable">URL</span><span class="token operator">=</span><span class="token string">"https://www.baidu.com"</span>

<span class="token comment"># Console</span>
<span class="token comment"># /bin/sh: URL: This variable is read only.</span>

<span class="token builtin class-name">declare</span> -r <span class="token assign-left variable">URL</span><span class="token operator">=</span><span class="token string">"https://www.google.com"</span>
<span class="token assign-left variable">URL</span><span class="token operator">=</span><span class="token string">"https://www.baidu.com"</span>
<span class="token comment"># Console</span>
<span class="token comment"># /bin/sh: URL: This variable is read only.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h3><p>使用 unset 命令可以删除变量。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">unset</span> variable_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>变量被删除后不能再次使用。unset 命令不能删除只读变量。</p>
<h3 id="命令输出变量"><a href="#命令输出变量" class="headerlink" title="命令输出变量"></a>命令输出变量</h3><p>使用一对反引号或是 <code>$()</code> 将命令包裹起来。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable"><span class="token variable">$(</span><span class="token function">expr</span> <span class="token number">2</span> + <span class="token number">2</span><span class="token variable">)</span></span>

<span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">2</span> + <span class="token number">2</span><span class="token variable">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="Shell-字符串"><a href="#Shell-字符串" class="headerlink" title="Shell 字符串"></a>Shell 字符串</h2><h3 id="单引号"><a href="#单引号" class="headerlink" title="单引号"></a>单引号</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">STR</span><span class="token operator">=</span><span class="token string">'this is a string'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>单引号字符串的限制：</p>
<ul>
<li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的</li>
<li>单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行）</li>
</ul>
<h3 id="双引号"><a href="#双引号" class="headerlink" title="双引号"></a>双引号</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">STR</span><span class="token operator">=</span><span class="token string">"this is a string: <span class="token variable">$NAME</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>双引号的优点：</p>
<ul>
<li>双引号里可以有变量</li>
<li>双引号里可以出现转义字符</li>
</ul>
<h3 id="拼接字符串"><a href="#拼接字符串" class="headerlink" title="拼接字符串"></a>拼接字符串</h3><p>我们可以通过以下方式拼接字符串：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">STR1</span><span class="token operator">=</span><span class="token string">"this is"</span> <span class="token variable">$NAME</span> <span class="token string">"\!"</span>
<span class="token assign-left variable">STR2</span><span class="token operator">=</span><span class="token string">"this is <span class="token variable">$NAME</span> \!"</span>
<span class="token comment"># echo -> this is WANG !</span>
<span class="token comment"># 符号需要转义</span>
<span class="token assign-left variable">STR1</span><span class="token operator">=</span><span class="token string">'this is'</span> <span class="token variable">$NAME</span> <span class="token string">'!'</span>
<span class="token comment"># 由于单引号原样输出，所以无需转义</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="获取字符串长度"><a href="#获取字符串长度" class="headerlink" title="获取字符串长度"></a>获取字符串长度</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>WANG
<span class="token builtin class-name">echo</span> <span class="token variable">$&#123;<span class="token operator">#</span>NAME&#125;</span> <span class="token comment"># 输出字符串长度 4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="提取子字符串"><a href="#提取子字符串" class="headerlink" title="提取子字符串"></a>提取子字符串</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>WANG
<span class="token builtin class-name">echo</span> <span class="token variable">$&#123;NAME<span class="token operator">:</span>1<span class="token operator">:</span>3&#125;</span> <span class="token comment"># 输出截取的字符串 ANG</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>注意</strong>：第一个字符的索引值为 <strong>0</strong>。</p>
</blockquote>
<h2 id="Shell-数组"><a href="#Shell-数组" class="headerlink" title="Shell 数组"></a>Shell 数组</h2><p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。</p>
<p>类似于 C 语言，数组元素的下标由 0 开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于 0。</p>
<h3 id="定义数组"><a href="#定义数组" class="headerlink" title="定义数组"></a>定义数组</h3><p>在 Shell 中，用括号来表示数组，数组元素用”空格”符号分割开。定义数组的一般形式为：</p>
<pre class="line-numbers language-none"><code class="language-none">array_name&#x3D;(value1 value2 ... valuen)
或
array_name&#x3D;(
value1 
value2 
... 
valuen
)
或 declare -a array_name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>还可以单独定义数组的各个分量：</p>
<pre class="line-numbers language-none"><code class="language-none">array_name[0]&#x3D;value0
array_name[1]&#x3D;value1
array_name[n]&#x3D;valuen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>可以不使用连续的下标，而且下标的范围没有限制。</p>
<h3 id="读取数组"><a href="#读取数组" class="headerlink" title="读取数组"></a>读取数组</h3><p>读取数组元素值的一般格式是：</p>
<pre class="line-numbers language-none"><code class="language-none">$&#123;array_name[1]&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>使用 <strong>@</strong>  或 <strong>*</strong> 符号可以获取数组中的所有元素：</p>
<pre class="line-numbers language-none"><code class="language-none">$&#123;array_name[@]&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="获取数组的长度"><a href="#获取数组的长度" class="headerlink" title="获取数组的长度"></a>获取数组的长度</h3><p>获取数组长度的方法与获取字符串长度的方法相同，都是在变量名前加 <strong>#</strong>：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">LEN1</span><span class="token operator">=</span><span class="token variable">$&#123;<span class="token operator">#</span>array_name&#125;</span>
<span class="token assign-left variable">LEN2</span><span class="token operator">=</span><span class="token variable">$&#123;<span class="token operator">#</span>array_name<span class="token punctuation">[</span>*<span class="token punctuation">]</span>&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<hr>
<h2 id="Shell-注释"><a href="#Shell-注释" class="headerlink" title="Shell 注释"></a>Shell 注释</h2><h3 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h3><p>以 <strong>#</strong> 开头的行就是注释，会被解释器忽略。</p>
<h3 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h3><p>多行注释还可以使用以下格式：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">:<span class="token operator">&lt;&lt;</span><span class="token string">EOF
注释内容...
注释内容...
注释内容...
EOF</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意：EOF 也可以使用其他符号</p>
</blockquote>
<h2 id="Shell-基本运算符"><a href="#Shell-基本运算符" class="headerlink" title="Shell 基本运算符"></a>Shell 基本运算符</h2><p>Shell 和其他编程语言一样，支持多种运算符，包括：</p>
<ul>
<li>算数运算符</li>
<li>关系运算符</li>
<li>布尔运算符</li>
<li>字符串运算符</li>
<li>文件测试运算符</li>
</ul>
<h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p>原生 bash 不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。</p>
<blockquote>
<p>需要注意的是，表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2。</p>
</blockquote>
<p>下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">加法</td>
<td style="text-align:left"><code>expr $a + $b</code> 结果为 30。</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">减法</td>
<td style="text-align:left"><code>expr $a - $b</code> 结果为 -10。</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">乘法</td>
<td style="text-align:left"><code>expr $a \* $b</code> 结果为  200。</td>
</tr>
<tr>
<td style="text-align:left">/</td>
<td style="text-align:left">除法</td>
<td style="text-align:left"><code>expr $b / $a</code> 结果为 2。</td>
</tr>
<tr>
<td style="text-align:left">%</td>
<td style="text-align:left">取余</td>
<td style="text-align:left"><code>expr $b % $a</code> 结果为 0。</td>
</tr>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">赋值</td>
<td style="text-align:left"><code>a=$b</code> 把变量 b 的值赋给 a。</td>
</tr>
<tr>
<td style="text-align:left">==</td>
<td style="text-align:left">相等。用于比较两个数字，相同则返回 true。</td>
<td style="text-align:left"><code>[ $a == $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td style="text-align:left">不相等。用于比较两个数字，不相同则返回 true。</td>
<td style="text-align:left"><code>[ $a != $b ]</code> 返回 true。</td>
</tr>
</tbody>
</table>
</div>
<p><strong>注意：</strong>条件表达式要放在方括号之间，并且要有空格，例如: <code>[$a==$b]</code> 是错误的，必须写成 <code>[ $a == $b ]</code>。</p>
<h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p>
<p>下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-eq</td>
<td style="text-align:left">检测两个数是否相等，相等返回 true。</td>
<td style="text-align:left"><code>[ $a -eq $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-ne</td>
<td style="text-align:left">检测两个数是否不相等，不相等返回 true。</td>
<td style="text-align:left"><code>[ $a -ne $b ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-gt</td>
<td style="text-align:left">检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -gt $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-lt</td>
<td style="text-align:left">检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -lt $b ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-ge</td>
<td style="text-align:left">检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -ge $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-le</td>
<td style="text-align:left">检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -le $b ]</code> 返回 true。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="布尔运算符"><a href="#布尔运算符" class="headerlink" title="布尔运算符"></a>布尔运算符</h3><p>下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">!</td>
<td style="text-align:left">非运算，表达式为 true 则返回 false，否则返回 true。</td>
<td style="text-align:left"><code>[ ! false ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-o</td>
<td style="text-align:left">或运算，有一个表达式为 true 则返回 true。</td>
<td style="text-align:left"><code>[ $a -lt 20 -o $b -gt 100 ]</code> 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-a</td>
<td style="text-align:left">与运算，两个表达式都为 true 才返回 true。</td>
<td style="text-align:left"><code>[ $a -lt 20 -a $b -gt 100 ]</code> 返回 false。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>以下介绍 Shell 的逻辑运算符，假定变量 a 为 10，变量 b 为 20:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&amp;&amp;</td>
<td style="text-align:left">逻辑的 AND</td>
<td style="text-align:left"><code>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</code> 返回 false</td>
</tr>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left">\</td>
<td style="text-align:left"></td>
<td>逻辑的 OR</td>
<td>`[[ $a -lt 100</td>
<td></td>
<td>$b -gt 100 ]]` 返回 true</td>
</tr>
</tbody>
</table>
</div>
<h3 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h3><p>下表列出了常用的字符串运算符，假定变量 a 为 “abc”，变量 b 为 “efg”：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">检测两个字符串是否相等，相等返回 true。</td>
<td style="text-align:left">[ $a = $b ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td style="text-align:left">检测两个字符串是否不相等，不相等返回 true。</td>
<td style="text-align:left">[ $a != $b ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-z</td>
<td style="text-align:left">检测字符串长度是否为0，为0返回 true。</td>
<td style="text-align:left">[ -z $a ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-n</td>
<td style="text-align:left">检测字符串长度是否不为 0，不为 0 返回 true。</td>
<td style="text-align:left">[ -n “$a” ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">检测字符串是否为空，不为空返回 true。</td>
<td style="text-align:left">[ $a ] 返回 true。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="文件测试运算符"><a href="#文件测试运算符" class="headerlink" title="文件测试运算符"></a>文件测试运算符</h3><p>文件测试运算符用于检测 Unix 文件的各种属性。</p>
<p>属性检测描述如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">操作符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-b file</td>
<td style="text-align:left">检测文件是否是块设备文件，如果是，则返回 true。</td>
<td style="text-align:left">[ -b $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-c file</td>
<td style="text-align:left">检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td style="text-align:left">[ -c $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-d file</td>
<td style="text-align:left">检测文件是否是目录，如果是，则返回 true。</td>
<td style="text-align:left">[ -d $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-f file</td>
<td style="text-align:left">检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td style="text-align:left">[ -f $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-g file</td>
<td style="text-align:left">检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -g $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-k file</td>
<td style="text-align:left">检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td style="text-align:left">[ -k $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-p file</td>
<td style="text-align:left">检测文件是否是有名管道，如果是，则返回 true。</td>
<td style="text-align:left">[ -p $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-u file</td>
<td style="text-align:left">检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -u $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-r file</td>
<td style="text-align:left">检测文件是否可读，如果是，则返回 true。</td>
<td style="text-align:left">[ -r $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-w file</td>
<td style="text-align:left">检测文件是否可写，如果是，则返回 true。</td>
<td style="text-align:left">[ -w $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-x file</td>
<td style="text-align:left">检测文件是否可执行，如果是，则返回 true。</td>
<td style="text-align:left">[ -x $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-s file</td>
<td style="text-align:left">检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td style="text-align:left">[ -s $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-e file</td>
<td style="text-align:left">检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td style="text-align:left">[ -e $file ] 返回 true。</td>
</tr>
</tbody>
</table>
</div>
<p>其他检查符：</p>
<ul>
<li><strong>-S</strong>: 判断某文件是否 socket。</li>
<li><strong>-L</strong>: 检测文件是否存在并且是一个符号链接。</li>
</ul>
<h1 id="Shell-传递参数"><a href="#Shell-传递参数" class="headerlink" title="Shell 传递参数"></a>Shell 传递参数</h1><p>我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：<strong>$n</strong>。<strong>n</strong> 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……</p>
<p>另外，还有几个特殊字符用来处理参数：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">参数处理</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$#</td>
<td style="text-align:left">传递到脚本的参数个数</td>
</tr>
<tr>
<td style="text-align:left">$*</td>
<td style="text-align:left">以一个单字符串显示所有向脚本传递的参数，中间用空格分割。</td>
</tr>
<tr>
<td style="text-align:left">$@</td>
<td style="text-align:left">与$*相同，但是使用时加引号，并在引号中返回每个参数。 如”$@”用「”」括起来的情况、以”$1” “$2” … “$n” 的形式输出所有参数。</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">$$</td>
<td style="text-align:left">脚本运行的当前进程ID号</td>
</tr>
<tr>
<td style="text-align:left">$!</td>
<td style="text-align:left">后台运行的最后一个进程的ID号</td>
</tr>
<tr>
<td style="text-align:left">$-</td>
<td style="text-align:left">显示Shell使用的当前选项，与<a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-set.html">set命令</a>功能相同。</td>
</tr>
<tr>
<td style="text-align:left">$?</td>
<td style="text-align:left">显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p><strong><code>$*</code> 和 <code>$@</code> 区别</strong></p>
<p>他们的区别在遍历上会有不同</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ./test.sh 1 2 3</span>

<span class="token builtin class-name">echo</span> <span class="token string">"-- \<span class="token variable">$*</span> 演示 ---"</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$*</span>"</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
 <span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span>

<span class="token comment"># Console</span>
<span class="token comment"># 1 2 3</span>

<span class="token builtin class-name">echo</span> <span class="token string">"-- \<span class="token variable">$@</span> 演示 ---"</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$@</span>"</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
 <span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span>

<span class="token comment"># Console</span>
<span class="token comment"># 1</span>
<span class="token comment"># 2</span>
<span class="token comment"># 3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</blockquote>
<h1 id="Shell-流程控制"><a href="#Shell-流程控制" class="headerlink" title="Shell 流程控制"></a>Shell 流程控制</h1><h2 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h2><h3 id="if-语法"><a href="#if-语法" class="headerlink" title="if 语法"></a>if 语法</h3><pre class="line-numbers language-none"><code class="language-none">if commands; then      
	commands
[elif commands; then      
	commands...]
[else      
	commands...]
fi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="test-条件语法"><a href="#test-条件语法" class="headerlink" title="test 条件语法"></a>test 条件语法</h3><p>test 命令用于执行条件表达式，有两种形式：<code>test expression</code> 和 <code>[ expression]</code>，其返回值为 0 时表达式为真，为 1 时表达式为假。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">NUM</span><span class="token operator">=</span><span class="token number">3</span>
$ <span class="token punctuation">[</span> <span class="token variable">$NUM</span> -eq <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>

<span class="token comment"># Console</span>
<span class="token comment"># 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="评估文件状态"><a href="#评估文件状态" class="headerlink" title="评估文件状态"></a>评估文件状态</h4><p>test 命令也可以用于评估文件状态，参数如下：</p>
<p><img src="/images/Linux/test评估文件状态.png" alt=""></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 判断$FILE指向的文件是否存在</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">"<span class="token variable">$FILE</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   <span class="token builtin class-name">command</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="评估字符串状态"><a href="#评估字符串状态" class="headerlink" title="评估字符串状态"></a>评估字符串状态</h4><p><img src="/images/Linux/test评估字符串状态.png" alt=""></p>
<h4 id="评估整数状态"><a href="#评估整数状态" class="headerlink" title="评估整数状态"></a>评估整数状态</h4><p><img src="/images/Linux/test评估整数状态.png" alt=""></p>
<blockquote>
<p>eq 和 ne 前有 <code>-</code> 图有问题</p>
</blockquote>
<h4 id="支持模式匹配的评估"><a href="#支持模式匹配的评估" class="headerlink" title="支持模式匹配的评估"></a>支持模式匹配的评估</h4><p>Bash 的现代版本包含了一个可以作为 test 增强版的复合命令，其用法如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token punctuation">[</span> expression <span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token number">1</span>. <span class="token punctuation">[</span><span class="token punctuation">[</span> string <span class="token operator">=</span><span class="token operator">!</span> regex<span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token comment"># 正则表达式的匹配</span>
<span class="token number">2</span>. <span class="token punctuation">[</span><span class="token punctuation">[</span> string <span class="token operator">==</span> File* <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># 和路径名扩展一致的模式匹配</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>正则表达式的匹配</strong></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">A</span><span class="token operator">=</span>STRING
$ <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$A</span>"</span> <span class="token operator">=~</span> ^STR* <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>和路径名扩展一致的模式匹配</strong></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">A</span><span class="token operator">=</span>STRING
$ <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$A</span>"</span> <span class="token operator">==</span> STR* <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="支持整数类型的评估"><a href="#支持整数类型的评估" class="headerlink" title="支持整数类型的评估"></a>支持整数类型的评估</h4><p>Bash 还支持另一种复合命令 <code>(())</code>，它在整数操作时用得上。该命令支持所有的算术求值。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token variable"><span class="token punctuation">((</span><span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span> <span class="token comment"># Console 1</span>
$ <span class="token variable"><span class="token punctuation">((</span><span class="token number">1</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span> <span class="token comment"># Console 0</span>
$ <span class="token variable"><span class="token punctuation">((</span><span class="token number">10</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span> <span class="token comment"># Console 0</span>

$ <span class="token assign-left variable">INT</span><span class="token operator">=</span>-5
$ <span class="token variable"><span class="token punctuation">((</span>INT <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span> <span class="token comment"># Console 0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>支持的算术操作符如下：</p>
<p><img src="/images/Linux/bash支持的算术操作符.png" alt=""></p>
<p>支持的赋值操作符如下：</p>
<p><img src="/images/Linux/bash支持的赋值操作符.png" alt=""></p>
<p>支持的位操作符如下：</p>
<p><img src="/images/Linux/bash支持的位操作符.png" alt=""></p>
<p>支持的比较操作符如下：</p>
<p><img src="/images/Linux/bash支持的比较操作符.png" alt=""></p>
<h4 id="支持组合表达式的评估"><a href="#支持组合表达式的评估" class="headerlink" title="支持组合表达式的评估"></a>支持组合表达式的评估</h4><p><img src="/images/Linux/test支持组合表达式的评估.png" alt=""></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">INT</span><span class="token operator">=</span>-5
$ <span class="token variable"><span class="token punctuation">((</span>INT <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> INT <span class="token operator">></span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
$ <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$INT</span>"</span> -lt <span class="token string">"0"</span> -a <span class="token string">"<span class="token variable">$INT</span>"</span> -gt <span class="token string">"-10"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$?</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h2><p>for循环一般格式为：</p>
<pre class="line-numbers language-none"><code class="language-none">for var in item1 item2 ... itemN; do
    command1;
    command2;
    ...
    commandN;
done;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当变量值在列表里，for 循环即执行一次所有命令，使用变量名获取列表中的当前取值。命令可为任何有效的 shell 命令和语句。in 列表可以包含替换、字符串和文件名。</p>
<p>in 列表是可选的，如果不用它，for 循环使用命令行的位置参数。</p>
<p>for 循环还支持以下形式：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> expression1<span class="token punctuation">;</span> expression2<span class="token punctuation">;</span> expression <span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	commands
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>其中表达式都是算术表达式。</p>
<h2 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h2><p>while 是在退出状态值不为 0 时结束循环。其语法格式为：</p>
<pre class="line-numbers language-none"><code class="language-none">while command; do
    command
done<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="until-循环"><a href="#until-循环" class="headerlink" title="until 循环"></a>until 循环</h2><p>until 循环会在接收到为 0 的退出状态值时终止。until 循环与 while 循环在处理方式上刚好相反。其语法格式为：</p>
<pre class="line-numbers language-none"><code class="language-none">until [ condition ]
do
    command
done<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>condition 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环。</p>
<h2 id="case-语句"><a href="#case-语句" class="headerlink" title="case 语句"></a>case 语句</h2><p><strong>case … esac</strong> 为多选择语句，与其他语言中的 switch … case 语句类似，是一种多分支选择结构，每个 case 分支用右圆括号开始，用两个分号 <strong>;;</strong> 表示 break，即执行结束，跳出整个 case … esac 语句，esac（就是 case 反过来）作为结束标记。</p>
<p>可以用 case 语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。</p>
<p><strong>case … esac</strong> 语法格式如下：</p>
<pre class="line-numbers language-none"><code class="language-none">case 值 in
模式1)
    command1
    command2
    ...
    commandN
    ;;
模式2|模式3)
    command1
    command2
    ...
    commandN
    ;;
esac<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>case 工作方式如上所示，取值后面必须为单词 <strong>in</strong>，每一模式必须以右括号结束。取值可以为变量或常数，匹配发现取值符合某一模式后，其间所有命令开始执行直至 <strong>;;</strong>。</p>
<p>下面是 case 支持的匹配模式：</p>
<p><img src="/images/Linux/case支持的匹配模式.png" alt=""></p>
<p>取值将检测匹配的每一个模式。一旦模式匹配，则执行完匹配模式相应命令后不再继续其他模式。如果无一匹配模式，使用星号 * 捕获该值，再执行后面的命令。</p>
<h2 id="跳出循环"><a href="#跳出循环" class="headerlink" title="跳出循环"></a>跳出循环</h2><p>在循环过程中，有时候需要在未达到循环结束条件时强制跳出循环，Shell使用两个命令来实现该功能：break 和 continue。break 命令允许跳出所有循环（终止执行后面的所有循环）。continue 命令仅仅跳出当前循环。</p>
<h1 id="Shell-函数"><a href="#Shell-函数" class="headerlink" title="Shell 函数"></a>Shell 函数</h1><p>Linux Shell 可以用户定义函数，然后在 Shell 脚本中可以随便调用。</p>
<h2 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h2><p>Shell 中函数的定义格式有如下三种：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function-name function">function_name</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    action<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>return int<span class="token punctuation">;</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function-name function">function_name</span> <span class="token punctuation">&#123;</span>
		action<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>return int<span class="token punctuation">;</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function-name function">function_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		action<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>return int<span class="token punctuation">;</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>

<span class="token comment"># 调用方式</span>
<span class="token comment"># function_name</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>说明：</p>
<ol>
<li>参数返回，可以显式加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。return 后跟数值 n（0-255）</li>
<li>参数获取、传递，使用 <code>$n</code> 来获取，在调用时跟随在函数后传递，以空格分隔。</li>
</ol>
<blockquote>
<p>注意，<code>$10</code> 不能获取第十个参数，获取第十个参数需要 <code>$&#123;10&#125;</code>。当 n&gt;=10 时，需要使用 <code>$&#123;n&#125;</code> 来获取参数。</p>
</blockquote>
<h2 id="函数的局部变量"><a href="#函数的局部变量" class="headerlink" title="函数的局部变量"></a>函数的局部变量</h2><p>在目前我们所编写的脚本中，所有的变量（包括常量）都是全局变量。在整个程序执行期间，全局变量一直存在。很多时候，这是好事。但是有时候，它会使 Shell 函数的使用变得复杂起来。在 Shell 函数内部，往往更需要局部变量。局部变量只能在定义其的 Shell 函数中有效，一旦 Shell 函数终止，就不复存在。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token number">0</span> <span class="token comment"># 定义了一个全局变量</span>
<span class="token keyword">function</span> <span class="token function-name function">test_local_variable</span> <span class="token punctuation">&#123;</span>
	<span class="token builtin class-name">local</span> foo <span class="token comment"># 定义了一个局部变量</span>
	<span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token number">1</span>
	<span class="token builtin class-name">echo</span> <span class="token string">"foo:<span class="token variable">$foo</span>"</span>
<span class="token punctuation">&#125;</span>
<span class="token builtin class-name">echo</span> <span class="token string">"foo:<span class="token variable">$foo</span>"</span>

<span class="token comment"># Console</span>
<span class="token comment"># foo:1</span>
<span class="token comment"># foo:0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="Shell-输入-输出重定向"><a href="#Shell-输入-输出重定向" class="headerlink" title="Shell 输入/输出重定向"></a>Shell 输入/输出重定向</h1><p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p>
<p>重定向命令列表如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">command &gt; file</td>
<td style="text-align:left">将输出重定向到 file。</td>
</tr>
<tr>
<td style="text-align:left">command &lt; file</td>
<td style="text-align:left">将输入重定向到 file。</td>
</tr>
<tr>
<td style="text-align:left">command &gt;&gt; file</td>
<td style="text-align:left">将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td style="text-align:left">n &gt; file</td>
<td style="text-align:left">将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr>
<td style="text-align:left">n &gt;&gt; file</td>
<td style="text-align:left">将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td style="text-align:left">n &gt;&amp; m</td>
<td style="text-align:left">将输出文件 m 和 n 合并。</td>
</tr>
<tr>
<td style="text-align:left">n &lt;&amp; m</td>
<td style="text-align:left">将输入文件 m 和 n 合并。</td>
</tr>
<tr>
<td style="text-align:left">&lt;&lt; tag</td>
<td style="text-align:left">将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h2><p>重定向一般通过在命令间插入特定的符号来实现。特别的，这些符号的语法如下所示:</p>
<pre class="line-numbers language-none"><code class="language-none">command1 &gt; file1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>上面这个命令执行command1然后将输出的内容存入file1。</p>
<p>注意任何 file1 内的已经存在的内容将被新内容替代。如果要将新内容添加在文件末尾，请使用 &gt;&gt; 操作符。</p>
<h2 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h2><p>和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：</p>
<pre class="line-numbers language-none"><code class="language-none">command1 &lt; file1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这样，本来需要从键盘获取输入的命令会转移到文件读取内容。</p>
<p>下面举一个例子，我们需要统计 users 文件的行数，执行以下命令：</p>
<pre class="line-numbers language-none"><code class="language-none">$ wc -l test.sh
2 test.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>也可以将输入重定向到 users 文件：</p>
<pre class="line-numbers language-none"><code class="language-none">$ wc -l &lt; test.sh
2 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。</p>
<pre class="line-numbers language-none"><code class="language-none">command1 &lt; infile &gt; outfile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>同时替换输入和输出，执行 command1，从文件 infile 读取内容，然后将输出写入到 outfile 中。</p>
<h2 id="重定向详解"><a href="#重定向详解" class="headerlink" title="重定向详解"></a>重定向详解</h2><p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p>
<ul>
<li>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li>
<li>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li>
<li>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</li>
</ul>
<p>默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将stdin 重定向到 file。</p>
<p>如果希望 stderr 重定向到 file，可以这样写：</p>
<pre class="line-numbers language-none"><code class="language-none">$ command 2&gt;file<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p>
<pre class="line-numbers language-none"><code class="language-none">$ command 2&gt;&gt;file<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p>
<pre class="line-numbers language-none"><code class="language-none">$ command &gt; file 2&gt;&amp;1

或者

$ command &gt;&gt; file 2&gt;&amp;1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p>
<pre class="line-numbers language-none"><code class="language-none">$ command &lt; file1 &gt; file2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。</p>
<h2 id="Here-Document"><a href="#Here-Document" class="headerlink" title="Here Document"></a>Here Document</h2><p>Here Document 是 Shell 中的一种特殊的重定向方式，它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。。</p>
<p>它的基本的形式如下：</p>
<pre class="line-numbers language-none"><code class="language-none">command &lt;&lt; delimiter
    document
delimiter<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意：</p>
<ul>
<li>结尾的 delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</li>
<li>开始的 delimiter 前后的空格会被忽略掉。</li>
</ul>
</blockquote>
<p>在命令行中通过 <strong>wc -l</strong> 命令计算 Here Document 的行数：</p>
<pre class="line-numbers language-none"><code class="language-none">$ wc -l &lt;&lt; EOF
    WANG
    ZI
    HAO
EOF
3          # 输出结果为 3 行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="dev-null-文件"><a href="#dev-null-文件" class="headerlink" title="/dev/null 文件"></a>/dev/null 文件</h2><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</p>
<pre class="line-numbers language-none"><code class="language-none">$ command &gt; &#x2F;dev&#x2F;null<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>/dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到”禁止输出”的效果。</p>
<p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p>
<pre class="line-numbers language-none"><code class="language-none">$ command &gt; &#x2F;dev&#x2F;null 2&gt;&amp;1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>这里的 <strong>2</strong> 和 <strong>&gt;</strong> 之间不可以有空格，<strong>2&gt;</strong> 是一体的时候才表示错误输出。</p>
</blockquote>
<h1 id="Shell-文件包含"><a href="#Shell-文件包含" class="headerlink" title="Shell 文件包含"></a>Shell 文件包含</h1><p>Shell 可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件。</p>
<p>Shell 文件包含的语法格式如下：</p>
<pre class="line-numbers language-none"><code class="language-none">. filename   # 注意点号(.)和文件名中间有一空格

或

source filename<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="Shell-错误跟踪"><a href="#Shell-错误跟踪" class="headerlink" title="Shell 错误跟踪"></a>Shell 错误跟踪</h1><p>Bug 经常表现为脚本中异常的逻辑流程。也就是说，部分脚本要么没执行，要么以错误的顺序或在错误的时刻执行了。跟踪是一种用于查看程序实际执行流程的技术。</p>
<h2 id="提示信息重定向到标准错误"><a href="#提示信息重定向到标准错误" class="headerlink" title="提示信息重定向到标准错误"></a>提示信息重定向到标准错误</h2><p>一种跟踪技术是通过在脚本中添加能够显示执行位置的提示信息。我们可以把这些信息加入代码片段：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"preparing to delete files"</span> <span class="token operator">></span><span class="token file-descriptor important">&amp;2</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -d <span class="token variable">$dir_name</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>      
		<span class="token keyword">if</span> <span class="token builtin class-name">cd</span> <span class="token variable">$dir_name</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
				<span class="token builtin class-name">echo</span> <span class="token string">"deleting files"</span> <span class="token operator">></span><span class="token file-descriptor important">&amp;2</span>            
				<span class="token function">rm</span> *      
    <span class="token keyword">else</span>            
    		<span class="token builtin class-name">echo</span> <span class="token string">"cannot cd to '<span class="token variable">$dir_name</span>'"</span> <span class="token operator">></span><span class="token file-descriptor important">&amp;2</span>            
    		<span class="token builtin class-name">exit</span> <span class="token number">1</span>      
    <span class="token keyword">fi</span>
<span class="token keyword">else</span>      
		<span class="token builtin class-name">echo</span> <span class="token string">"no such directory: '<span class="token variable">$dir_name</span>'"</span> <span class="token operator">></span><span class="token file-descriptor important">&amp;2</span>      
		<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">"file deletion complete"</span> <span class="token operator">></span><span class="token file-descriptor important">&amp;2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="脚本跟踪功能"><a href="#脚本跟踪功能" class="headerlink" title="脚本跟踪功能"></a>脚本跟踪功能</h2><p>bash 通过 -x 选项和 set 命令的 -x 选项激活整个脚本的跟踪功能。</p>
<pre class="line-numbers language-none"><code class="language-none">#!&#x2F;bin&#x2F;bash -x<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

commands A
<span class="token builtin class-name">set</span> -x <span class="token comment"># 打开跟踪</span>
commands B
<span class="token builtin class-name">set</span> +x <span class="token comment"># 关闭跟踪</span>
commands C<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>启用跟踪后，我们可以查看命令经过扩展之后的执行情况。行首的加号表示此行是跟踪显示的结果，以区别于一般的输出结果。加号是用于跟踪输出的默认字符，是由 Shell 变量 PS4（Prompt String 4）设定的。可以改变 PS4 变量的值，增强提示符的实用性。我们对变量PS4做出修改，在其中加入当前所跟踪代码的行号。</p>
<blockquote>
<p>注意，单引号用于将扩展推迟到真正使用提示符的时候：</p>
</blockquote>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/Shell/" rel="tag"># Shell</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/08/11/Flowable-4-%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/" rel="prev" title="Flowable 执行流程">
      <i class="fa fa-chevron-left"></i> Flowable 执行流程
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/09/07/ElasticSearch-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/" rel="next" title="ElasticSearch 基本介绍">
      ElasticSearch 基本介绍 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-number">1.</span> <span class="nav-text">Shell 基础语法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell-%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.</span> <span class="nav-text">Shell 变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E8%88%AC%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.1.</span> <span class="nav-text">一般变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AA%E8%AF%BB%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.2.</span> <span class="nav-text">只读变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.3.</span> <span class="nav-text">删除变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%BE%93%E5%87%BA%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.4.</span> <span class="nav-text">命令输出变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">1.2.</span> <span class="nav-text">Shell 字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E5%BC%95%E5%8F%B7"><span class="nav-number">1.2.1.</span> <span class="nav-text">单引号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E5%BC%95%E5%8F%B7"><span class="nav-number">1.2.2.</span> <span class="nav-text">双引号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">1.2.3.</span> <span class="nav-text">拼接字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6"><span class="nav-number">1.2.4.</span> <span class="nav-text">获取字符串长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E5%8F%96%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">1.2.5.</span> <span class="nav-text">提取子字符串</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell-%E6%95%B0%E7%BB%84"><span class="nav-number">1.3.</span> <span class="nav-text">Shell 数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84"><span class="nav-number">1.3.1.</span> <span class="nav-text">定义数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E7%BB%84"><span class="nav-number">1.3.2.</span> <span class="nav-text">读取数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="nav-number">1.3.3.</span> <span class="nav-text">获取数组的长度</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell-%E6%B3%A8%E9%87%8A"><span class="nav-number">1.4.</span> <span class="nav-text">Shell 注释</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="nav-number">1.4.1.</span> <span class="nav-text">单行注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="nav-number">1.4.2.</span> <span class="nav-text">多行注释</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell-%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.</span> <span class="nav-text">Shell 基本运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.2.</span> <span class="nav-text">关系运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.3.</span> <span class="nav-text">布尔运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.4.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.5.</span> <span class="nav-text">字符串运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.6.</span> <span class="nav-text">文件测试运算符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="nav-number">2.</span> <span class="nav-text">Shell 传递参数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">3.</span> <span class="nav-text">Shell 流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#if-%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.1.</span> <span class="nav-text">if 语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if-%E8%AF%AD%E6%B3%95"><span class="nav-number">3.1.1.</span> <span class="nav-text">if 语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#test-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E6%B3%95"><span class="nav-number">3.1.2.</span> <span class="nav-text">test 条件语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%84%E4%BC%B0%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">评估文件状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%84%E4%BC%B0%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%8A%B6%E6%80%81"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">评估字符串状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%84%E4%BC%B0%E6%95%B4%E6%95%B0%E7%8A%B6%E6%80%81"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">评估整数状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E7%9A%84%E8%AF%84%E4%BC%B0"><span class="nav-number">3.1.2.4.</span> <span class="nav-text">支持模式匹配的评估</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%AF%84%E4%BC%B0"><span class="nav-number">3.1.2.5.</span> <span class="nav-text">支持整数类型的评估</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E7%BB%84%E5%90%88%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%AF%84%E4%BC%B0"><span class="nav-number">3.1.2.6.</span> <span class="nav-text">支持组合表达式的评估</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for-%E5%BE%AA%E7%8E%AF"><span class="nav-number">3.2.</span> <span class="nav-text">for 循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#while-%E5%BE%AA%E7%8E%AF"><span class="nav-number">3.3.</span> <span class="nav-text">while 循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#until-%E5%BE%AA%E7%8E%AF"><span class="nav-number">3.4.</span> <span class="nav-text">until 循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#case-%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.5.</span> <span class="nav-text">case 语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF"><span class="nav-number">3.6.</span> <span class="nav-text">跳出循环</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E5%87%BD%E6%95%B0"><span class="nav-number">4.</span> <span class="nav-text">Shell 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-number">4.1.</span> <span class="nav-text">函数的定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.</span> <span class="nav-text">函数的局部变量</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">5.</span> <span class="nav-text">Shell 输入&#x2F;输出重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">5.1.</span> <span class="nav-text">输出重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">5.2.</span> <span class="nav-text">输入重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E8%AF%A6%E8%A7%A3"><span class="nav-number">5.3.</span> <span class="nav-text">重定向详解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Here-Document"><span class="nav-number">5.4.</span> <span class="nav-text">Here Document</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dev-null-%E6%96%87%E4%BB%B6"><span class="nav-number">5.5.</span> <span class="nav-text">&#x2F;dev&#x2F;null 文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="nav-number">6.</span> <span class="nav-text">Shell 文件包含</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E9%94%99%E8%AF%AF%E8%B7%9F%E8%B8%AA"><span class="nav-number">7.</span> <span class="nav-text">Shell 错误跟踪</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA%E4%BF%A1%E6%81%AF%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E6%A0%87%E5%87%86%E9%94%99%E8%AF%AF"><span class="nav-number">7.1.</span> <span class="nav-text">提示信息重定向到标准错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E8%B7%9F%E8%B8%AA%E5%8A%9F%E8%83%BD"><span class="nav-number">7.2.</span> <span class="nav-text">脚本跟踪功能</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Wang Zihao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">138</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">273</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wang Zihao</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
